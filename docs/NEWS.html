<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Marginal Effects Zoo</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./LICENSE.html" rel="next">
<link href="./man/print.marginaleffects.html" rel="prev">
<link href="./images/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/marginaleffects_icon.png" alt="marginaleffects logo" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Marginal Effects Zoo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./vignettes/get_started.html" aria-current="page"> 
<span class="menu-text">Get started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./files/marginaleffects_arel-bundock_greifer_heiss_jss5115.pdf"> 
<span class="menu-text">Article</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./vignettes/help.html"> 
<span class="menu-text">Help</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vincentarelbundock/marginaleffects"> <i class="bi bi-github" role="img" aria-label="marginaleffects GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/vincentab"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./NEWS.html">News</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/get_started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Get started</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Tutorials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/predictions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comparisons</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/slopes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Slopes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/hypothesis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hypothesis Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plots</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Case studies</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/brms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/bootstrap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bootstrap &amp; Simulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/categorical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Categorical outcomes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/conformal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conformal prediction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/conjoint.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conjoint experiments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/elasticity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Elasticity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/equivalence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Equivalence Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/experiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Experiments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/gam.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GAM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/gcomputation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">G-Computation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/heterogeneity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Heterogeneity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/ipw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inverse Probability Weighting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/logit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logit</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/lme4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed Effects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/machine_learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Machine Learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/marginalmeans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Marginal Means</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/matching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Matching</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/mrp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MrP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/multiple_imputation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/svalues.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">S Values</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Miscellaneous</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Help</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FAQ</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/meme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Meme gallery</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/alternative_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Alternative Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/extensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extensions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Links</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/performance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Performance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/numpyro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NumPyro</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/supported_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Supported Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes/uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Standard Errors</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Functions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/predictions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>predictions</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>comparisons</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/slopes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>slopes</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/plot_predictions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>plot_predictions</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/plot_comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>plot_comparisons</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/plot_slopes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>plot_slopes</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/hypotheses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>hypotheses</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/inferences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>inferences</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/posterior_draws.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>posterior_draws</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/datagrid.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>datagrid</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man/print.marginaleffects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>print.marginaleffects</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./NEWS.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">News</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LICENSE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CITATION.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Citation</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#news" id="toc-news" class="nav-link active" data-scroll-target="#news">News</a>
  <ul class="collapse">
  <li><a href="#development" id="toc-development" class="nav-link" data-scroll-target="#development">Development</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section">0.21.0</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1">0.20.1</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2">0.20.0</a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3">0.19.0</a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4">0.18.0</a></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5">0.17.0</a></li>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6">0.16.0</a></li>
  <li><a href="#section-7" id="toc-section-7" class="nav-link" data-scroll-target="#section-7">0.15.1</a></li>
  <li><a href="#section-8" id="toc-section-8" class="nav-link" data-scroll-target="#section-8">0.15.0</a></li>
  <li><a href="#section-9" id="toc-section-9" class="nav-link" data-scroll-target="#section-9">0.14.0</a></li>
  <li><a href="#section-10" id="toc-section-10" class="nav-link" data-scroll-target="#section-10">0.13.0</a></li>
  <li><a href="#section-11" id="toc-section-11" class="nav-link" data-scroll-target="#section-11">0.12.0</a></li>
  <li><a href="#section-12" id="toc-section-12" class="nav-link" data-scroll-target="#section-12">0.11.2</a></li>
  <li><a href="#section-13" id="toc-section-13" class="nav-link" data-scroll-target="#section-13">0.11.1</a></li>
  <li><a href="#section-14" id="toc-section-14" class="nav-link" data-scroll-target="#section-14">0.11.0</a></li>
  <li><a href="#section-15" id="toc-section-15" class="nav-link" data-scroll-target="#section-15">0.10.0</a></li>
  <li><a href="#section-16" id="toc-section-16" class="nav-link" data-scroll-target="#section-16">0.9.0</a></li>
  <li><a href="#section-17" id="toc-section-17" class="nav-link" data-scroll-target="#section-17">0.8.1</a></li>
  <li><a href="#section-18" id="toc-section-18" class="nav-link" data-scroll-target="#section-18">0.8.0</a></li>
  <li><a href="#section-19" id="toc-section-19" class="nav-link" data-scroll-target="#section-19">0.7.1</a></li>
  <li><a href="#section-20" id="toc-section-20" class="nav-link" data-scroll-target="#section-20">0.7.0</a></li>
  <li><a href="#section-21" id="toc-section-21" class="nav-link" data-scroll-target="#section-21">0.6.0</a></li>
  <li><a href="#section-22" id="toc-section-22" class="nav-link" data-scroll-target="#section-22">0.5.0</a></li>
  <li><a href="#section-23" id="toc-section-23" class="nav-link" data-scroll-target="#section-23">0.4.1</a></li>
  <li><a href="#section-24" id="toc-section-24" class="nav-link" data-scroll-target="#section-24">0.4.0</a></li>
  <li><a href="#section-25" id="toc-section-25" class="nav-link" data-scroll-target="#section-25">0.3.4</a></li>
  <li><a href="#section-26" id="toc-section-26" class="nav-link" data-scroll-target="#section-26">0.3.3</a></li>
  <li><a href="#section-27" id="toc-section-27" class="nav-link" data-scroll-target="#section-27">0.3.2</a></li>
  <li><a href="#section-28" id="toc-section-28" class="nav-link" data-scroll-target="#section-28">0.3.1</a></li>
  <li><a href="#section-29" id="toc-section-29" class="nav-link" data-scroll-target="#section-29">0.3.0</a></li>
  <li><a href="#section-30" id="toc-section-30" class="nav-link" data-scroll-target="#section-30">0.2.0</a></li>
  <li><a href="#section-31" id="toc-section-31" class="nav-link" data-scroll-target="#section-31">0.1.0</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="news" class="level1">
<h1>News</h1>
<section id="development" class="level2">
<h2 class="anchored" data-anchor-id="development">Development</h2>
<ul>
<li><code>hypotheses(joint=TRUE)</code>: do not call <code>stats::nobs()</code> unless necessary.</li>
</ul>
<p>Bugs:</p>
<ul>
<li>Average lift and average comparisons with user-supplied functions could be be calculated incorrectely when all predictors were categorical. Thanks to <a href="https://github.com/Dpananos"><span class="citation" data-cites="Dpananos">@Dpananos</span></a> for Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1151">#1151</a>.</li>
<li>Indexing bug returned <code>NA</code> for some commands in <code>survey</code> models. Thanks to <a href="https://github.com/weikang9009"><span class="citation" data-cites="weikang9009">@weikang9009</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1161">#1161</a>.</li>
</ul>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">0.21.0</h2>
<p>New:</p>
<ul>
<li><code>hypothesis</code> accepts formulas like: <code>ratio ~ sequential | group</code></li>
<li>Allow reverse binary contrasts: comparisons(mod, variables = list(am = 1:0, vs = 0:1)). Thanks to K. Henry for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1137">#1137</a>.</li>
<li><code>options(marginaleffects_safe = FALSE)</code> disables some safety checks and allows unadvisable (but potentially) useful features like <em>many</em> pairwise comparisons. Thanks to D.Locke for the feature request.</li>
<li><code>newdata="balanced"</code> is a shortcut to produce estimates at combinations of all categorical predictors, holding numeric predictors at their means. Equivalent to <code>datagrid(grid_type="balanced")</code></li>
</ul>
<p>Misc:</p>
<ul>
<li>Deprecation warning for <code>specify_hypothesis()</code>. This function was clearly marked as experimental, and has been available only for one release. It was a bad idea. Users should supply a custom function or a formula to the <code>hypothesis</code> argument. The new formula interface, in particular, makes it very easy to conduct group-wise hypothesis tests.</li>
<li>Type checks are a bit looser to accomodate custom models.</li>
</ul>
<p>Bugs:</p>
<ul>
<li>Fix regression in <code>mlogit</code> models due to factor conversion. This raised an error before returning result, so there is no numerical danger.</li>
<li><code>survey</code> package models work when <code>row.names(model)</code> is not coercible to integers. Thanks to <a href="https://github.com/ngreifer"><span class="citation" data-cites="ngreifer">@ngreifer</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1131">#1131</a>.</li>
</ul>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">0.20.1</h2>
<ul>
<li>The <code>comparison</code> argument of the <code>comparisons()</code> function is automatically switched to the <code>avg</code> version of the function shortcuts when calling <code>avg_comparisons()</code> or setting <code>by=TRUE</code>. For example, <code>comparison="ratio"</code> becomes <code>comparison="ratioavg"</code> when calling <code>avg_comparisons()</code>. Note that <code>comparison="ratioavg"</code> is equivalent to: <code>comparison = \(hi,lo) mean(hi)/mean(lo)</code></li>
<li>Fixed a bug (“non-conformable arguments”) when using <code>survreg</code> objects from <code>survival::survreg()</code>.</li>
<li>Fixed bug in <code>inferences()</code> for GLM models and <code>type="invlink"</code>, where the wrong scale would be reported for confidence intervals.</li>
</ul>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2">0.20.0</h2>
<p>Breaking changes:</p>
<ul>
<li>The order of the <code>group</code> column is preserved when the original variable is a factor. This may change the order of output, which could have an effect on hypothesis tests using the <code>hypothesis="b1=b3"</code> syntax.</li>
</ul>
<p>New:</p>
<ul>
<li>New <em>experimental</em> function: <code>specify_hypothesis()</code> returns functions to be used in the <code>hypothesis</code> argument of <code>predictions()</code>, <code>comparisons()</code>, and <code>slopes()</code>. This convenience function can be used to specify complex aggregations and estimands for hypothesis tests (ex: by subgroups or with custom functions).</li>
<li><code>hypothesis</code> argument accepts “meandev” and “meanotherdev” to compute deviations from the mean estimate.</li>
<li>Do not raise extraneous warning for <code>survey</code> package models when the <code>by</code> argument is not used.</li>
<li>Informative error when <code>hypotheses()</code> is called twice on the same object.</li>
<li><code>print("tinytable")</code> adds footnotes to the table with columns and type information.</li>
</ul>
<p>Bugs:</p>
<ul>
<li><code>mlogit</code> <code>predict()</code> method does not play well with <code>data.table</code>. Thanks to <a href="https://github.com/andrewheiss"><span class="citation" data-cites="andrewheiss">@andrewheiss</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1086">#1086</a>.</li>
<li>Avoid merging <code>newdata</code> in <code>predictions()</code> when <code>hypothesis</code> can change the meaning of rows. Avoid Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1105">#1105</a> reported by <a href="https://github.com/strengejacke"><span class="citation" data-cites="strengejacke">@strengejacke</span></a>.</li>
<li><code>inferences()</code> did not work with the <code>transform</code> argument. Thanks to Demetri Pananos for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1115">#1115</a>.</li>
</ul>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3">0.19.0</h2>
<p>Breaking changes:</p>
<ul>
<li><code>datagrid()</code> no longer includes the response variable by default when it is not explicitly specified by the user. Use the new <code>response</code> argument to include it.</li>
<li><code>datagrid(grid_type="balanced")</code> returns factors ordered by level rather than by order of appearance in the original data.</li>
<li>Order of some rows in the output may differ when using <code>datagrid()</code>. Necessary to fix issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1079">#1079</a> (see below).</li>
</ul>
<p>New modeling packages supported:</p>
<ul>
<li><code>flexsurv</code>: Thanks to <a href="https://github.com/mattwarkentin"><span class="citation" data-cites="mattwarkentin">@mattwarkentin</span></a> for code contributions in PR <a href="https://github.com/vincentarelbundock/marginaleffects/issues/781">#781</a>. https://cran.r-project.org/web/packages/flexsurv/index.html</li>
<li><code>REndo</code>: https://cran.r-project.org/web/packages/REndo/index.html</li>
</ul>
<p>New:</p>
<ul>
<li><code>wts=TRUE</code> tries to retrieves weights used in a weighted fit such as <code>lm()</code> with the <code>weights</code> argument or a model fitted using the <code>survey</code> package. Thanks to <a href="https://github.com/ngreifer"><span class="citation" data-cites="ngreifer">@ngreifer</span></a> for feature request</li>
<li><code>print.marginaleffects()</code> supports <code>style="tinytable"</code>, which returns a <code>tinytable</code> object. Call <code>print(avg_slopes(model))</code> to get a nice printed table in Quarto or Rmarkdown documents, via Typst, LaTeX or HTML. Default print format can be set using: <code>options(marginaleffects_print_style="tinytable")</code></li>
<li><code>hypothesis</code> argument accepts a function which takes a <code>marginaleffects</code> data frame and returns a transformed data frame with <code>term</code> and <code>estimate</code> columns.</li>
<li><code>datagrid()</code> gets a <code>response</code> argument (default is <code>FALSE</code>) to control if the response variable is included or excluded from the grid-building process.</li>
<li>The <code>base::subset()</code> and <code>dplyr::filter()</code> functions can be called with a single argument in <code>newdata</code> to select a subset of rows from the dataset used to fit the model.
<ul>
<li>Ex: avg_comparisons(fit, variables = “treatment”, newdata = subset(treatment == 1))`</li>
</ul></li>
<li>Better warning for unsupported arguments.</li>
<li><code>df</code> argument in <code>hypotheses()</code> accepts a vector of length 2 to control degrees of freedom in F tests.</li>
<li><code>nlme::lme()</code> objects raise a warning about degrees of freedom. Thanks to and <a href="https://github.com/stefgehrig"><span class="citation" data-cites="stefgehrig">@stefgehrig</span></a> and <a href="https://github.com/huftis"><span class="citation" data-cites="huftis">@huftis</span></a> for discussion in Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/960">#960</a>.</li>
</ul>
<p>Major bugs:</p>
<ul>
<li>Some results could be mislabelled with factor variables used in combination with <code>datagrid()</code> or <code>condition</code>. Thanks to <a href="https://github.com/snhansen"><span class="citation" data-cites="snhansen">@snhansen</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1079">#1079</a>.</li>
<li><code>glmmTMB</code> models now report correct standard errors, and raise a warning that these standard errors only account for uncertainty in fixed effect parameters. Thanks to contributors to Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1024">#1024</a> and especially to <a href="https://github.com/bbolker"><span class="citation" data-cites="bbolker">@bbolker</span></a> for discussion and solution.</li>
</ul>
<p>Minor bugs:</p>
<ul>
<li>Uninformative error when a custom <code>comparison</code> function returns <code>NA</code> in bayesian models. Thanks to <a href="https://github.com/Sandhu-SS"><span class="citation" data-cites="Sandhu-SS">@Sandhu-SS</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1017">#1017</a>.</li>
<li><code>datagrid()</code> returns an object with full attributes when <code>by</code> is used. Thanks to <a href="https://github.com/Sandhu-SS"><span class="citation" data-cites="Sandhu-SS">@Sandhu-SS</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1058">#1058</a>.</li>
<li><code>inferences(method="simulation")</code> with <code>inferences()</code> function. Thanks to <a href="https://github.com/davidarmstrong"><span class="citation" data-cites="davidarmstrong">@davidarmstrong</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1054">#1054</a>.</li>
</ul>
</section>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4">0.18.0</h2>
<p>This release represents a major step towards 1.0.0. Some functions are renamed and now raise deprecation warnings. After 1.0.0, the API will become much more stable, and any change will have to be very deliberate with much lead time and deprecation delays.</p>
<p>Breaking changes:</p>
<ul>
<li><code>tidy()</code> no longer takes the average of estimates in the original model object. Users who want an aggregate estimate should call the relevant <code>avg_*()</code> function, or use the <code>by</code> argument explicitly. The previous behavior led to unexpected behavior and increased code complexity a lot.</li>
<li><code>summary()</code> methods are removed. These have never provided any additional information; they just reprinted the output already available with the standard print method. At least the default <code>summary()</code> for data frames (which is now triggered on <code>marginaleffects</code> object) provides a different view on the content of the object.</li>
<li><code>plot_cco()</code>, <code>plot_cme()</code>, and <code>plot_cap()</code> were renamed in version 0.9.0, one year ago. They are now fully removed from the package.</li>
</ul>
<p>New:</p>
<ul>
<li><code>datagrid(grid_type = "balanced")</code> creates a balanced grid with all unique values of categorical predictors. This can be used with <code>predictions()</code> to compute marginal means as in the <code>emmeans</code> package.</li>
<li><code>mvgam</code> package support (multivariate generalized additive models)</li>
</ul>
<p>Deprecation warnings:</p>
<ul>
<li><code>deltamethod()</code> has been named <code>hypotheses()</code> for a while. We now issue a deprecation warning and it will be removed eventually.</li>
<li><code>datagridcf()</code> will eventually be deprecated and removed from the package. We will raise a warning for at least one year before removing the function. Identical results can be obtained with <code>datagrid(..., grid_type="counterfactual")</code></li>
<li><code>marginal_means()</code> will eventually be deprecated and removed from the package. We will raise a warning for at least one year before removing the function. Identical results can be obtained using the <code>predictions()</code> function and the <code>grid_type="balanced"</code> argument of <code>datagrid()</code>. Examples are in the marginal means vignette on the website.</li>
</ul>
<p>Minor:</p>
<ul>
<li>Better warning messages for unsupported matrix columns, enhancing user experience and troubleshooting.</li>
<li>Various improvements to documentation.</li>
<li>Typos</li>
<li>Repository hosts model objects for easier testing.</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>Error on <code>hypotheses(joint = "string")</code> for <code>comparisons()</code> objects (no result was returned). Thanks to <a href="https://github.com/BorgeJorge"><span class="citation" data-cites="BorgeJorge">@BorgeJorge</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/981">#981</a>.</li>
<li>Enhanced support for multi-equation Bayesian models with <code>brms</code> models. Thanks to <a href="https://github.com/winterstat"><span class="citation" data-cites="winterstat">@winterstat</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1006">#1006</a>.</li>
<li>Parameter names with spaces could break standard errors. Thanks to <a href="https://github.com/Lefty2021"><span class="citation" data-cites="Lefty2021">@Lefty2021</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/1005">#1005</a>.</li>
</ul>
</section>
<section id="section-5" class="level2">
<h2 class="anchored" data-anchor-id="section-5">0.17.0</h2>
<p>Breaking changes:</p>
<ul>
<li>The <code>comparisons()</code> now uses “forward contrasts” by default for numeric predictors, instead of “centered contrasts”. This can lead to small numerical differences in non-linear models.</li>
<li>The <code>variables</code> argument of the <code>comparisons()</code> function no longer accepts numeric vectors unless they are of length 2, specifying the low and high contrast values. This is to avoid ambiguity between the two vector version. Users should supply a data frame or a function instead. This is nearly as easy, and removes ambiguity.</li>
</ul>
<p>New supported packages:</p>
<ul>
<li><code>dbarts</code>: https://cran.r-project.org/package=dbarts</li>
<li><code>mvgam</code>: https://nicholasjclark.github.io/mvgam/ Not available on CRAN yet, but this package maintains its own <code>marginaleffects</code> support function.</li>
<li><code>rms::Gls</code>: https://cran.r-project.org/package=rms</li>
</ul>
<p>Misc:</p>
<ul>
<li><code>comparisons()</code>: The <code>variables</code> argument now accepts functions and data frames for factor, character, and logical variables.</li>
<li>Deprecation warning for: <code>plot_cap()</code>, <code>plot_cme()</code>, and <code>plot_cco()</code>. These function names will be removed in version 1.0.0.</li>
<li><code>options(modelsummary_factory_default=...)</code> is respected in Quarto and Rmarkdown documents.</li>
</ul>
<p>Bugs:</p>
<ul>
<li><code>wts</code> argument now respected in <code>avg_slopes()</code> for binary variables. Thanks to <a href="https://github.com/trose64"><span class="citation" data-cites="trose64">@trose64</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/961">#961</a></li>
<li>Custom functions in the <code>comparison</code> argument of <code>comparisons()</code> did not supply the correct <code>x</code> vector length for bayesian models when the <code>by</code> argument is used. Thanks to <a href="https://github.com/Sandhu-SS"><span class="citation" data-cites="Sandhu-SS">@Sandhu-SS</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/931">#931</a>.</li>
<li>Add support for two facet variables (through <code>facet_grid</code>) when plotting using <code>condition</code></li>
<li><code>comparisons()</code>: When <code>variables</code> is a vector of length two and <code>newdata</code> has exactly two columns, there was ambiguity between custom vectors and length two vector of contrasts. Bug reported by C. Rainey on Twitter.</li>
<li>Superfluous warning with <code>fixest::fenegbin</code>.</li>
</ul>
</section>
<section id="section-6" class="level2">
<h2 class="anchored" data-anchor-id="section-6">0.16.0</h2>
<p>Machine learning support:</p>
<ul>
<li><code>tidymodels</code> package</li>
<li><code>mlr3</code> package</li>
</ul>
<p>Misc:</p>
<ul>
<li>New vignettes:
<ul>
<li>Inverse Probability Weighting</li>
<li>Machine Learning</li>
<li>Matching</li>
</ul></li>
<li>Add support for <code>hypotheses()</code> to <code>inferences()</code>. Thanks to <a href="https://github.com/Tristan-Siegfried"><span class="citation" data-cites="Tristan-Siegfried">@Tristan-Siegfried</span></a> for code contribution <a href="https://github.com/vincentarelbundock/marginaleffects/issues/908">#908</a>.</li>
<li>Support <code>survival::survreg()</code>. Thanks to Carlisle Rainey for Report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/911">#911</a>.</li>
<li><code>column_names</code> argument in <code>print.marginaleffects()</code> to suppress the printed column names at the bottom of the printout.</li>
<li>The function supplied to the <code>comparison</code> argument of the <code>comparisons()</code> function can now operate on <code>x</code> and on <code>newdata</code> directly (e.g., to check the number of observations).</li>
<li>More informative errors from <code>predict()</code>.</li>
</ul>
<p>Bugs:</p>
<ul>
<li>Some <code>gamlss</code> models generated an error related to the <code>what</code> argument. Thanks to <a href="https://github.com/DHLocke"><span class="citation" data-cites="DHLocke">@DHLocke</span></a> for Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/933">#933</a></li>
</ul>
</section>
<section id="section-7" class="level2">
<h2 class="anchored" data-anchor-id="section-7">0.15.1</h2>
<ul>
<li><code>hypotheses()</code>: The <code>FUN</code> argument handles <code>group</code> columns gracefully.</li>
<li>Native support for <code>Amelia</code> for multiple imputation.</li>
</ul>
<p>Documentation:</p>
<ul>
<li>New section on “Complex aggregations” in the Hypothesis testing vignette.</li>
</ul>
<p>Bug fix:</p>
<ul>
<li>Results of the <code>predictions()</code> function could be inaccurate when (a) running version 0.15.0, (b) <code>type</code> is <code>NULL</code> or <code>invlink(link)</code>, (c) model is <code>glm()</code>, and (d) the <code>hypothesis</code> argument is non-numeric. Thanks to <a href="https://github.com/strengejacke"><span class="citation" data-cites="strengejacke">@strengejacke</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/903">#903</a></li>
</ul>
</section>
<section id="section-8" class="level2">
<h2 class="anchored" data-anchor-id="section-8">0.15.0</h2>
<p>New:</p>
<ul>
<li>Conformal prediction via <code>inferences()</code></li>
<li><code>hypothesis</code> argument now accepts multiple string formulas.</li>
<li>The <code>type</code> argument now accepts an explicit <code>invlink(link)</code> value instead of silently back-transforming. Users are no longer pointed to <code>type_dictionary</code>. Instead, they should call their function with a bad <code>type</code> value, and they will obtain a list of valid types. The default <code>type</code> value is printed in the output. This is useful because the default <code>type</code> value is <code>NULL</code>, so the user often does not explicitly decide.</li>
<li>Allow install with Rcpp 1.0.0 and greater.</li>
</ul>
<p>Support new models:</p>
<ul>
<li><code>survey::svyolr()</code></li>
</ul>
<p>Misc:</p>
<ul>
<li><code>inferences(method="simulation")</code> uses the original point estimate rather than the mean of the simulation distribution. Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/851">#851</a>.</li>
<li>Better documentation and error messages for <code>newdata=NULL</code></li>
<li>Some performance improvements for <code>predictions()</code> and <code>marginalmeans()</code> (<a href="https://github.com/vincentarelbundock/marginaleffects/issues/880">#880</a>, <a href="https://github.com/vincentarelbundock/marginaleffects/issues/882">#882</a>, <a href="https://github.com/etiennebacher"><span class="citation" data-cites="etiennebacher">@etiennebacher</span></a>).</li>
</ul>
<p>Bug fix:</p>
<ul>
<li><code>newdata="median"</code> returned mean of binary variables. Thanks to <a href="https://github.com/jkhanson1970"><span class="citation" data-cites="jkhanson1970">@jkhanson1970</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/896">#896</a>.</li>
</ul>
</section>
<section id="section-9" class="level2">
<h2 class="anchored" data-anchor-id="section-9">0.14.0</h2>
<p>Breaking changes:</p>
<ul>
<li>Row order of the output changes for some objects. Rows are not sorted alphabetically by <code>term</code>, <code>by</code>, and variables explicitly supplied to <code>datagrid</code>. This can affect hypothesis tests computed using the b1, b2, b3, and other indices.</li>
<li>New procedure <code>numderiv</code> argument use a different procedure to select the step size used in the finite difference numeric derivative used to compute standard errors: abs(x) * sqrt(.Machine$double.eps). The numerical results may not be exactly identical to previous versions of <code>marginaleffects</code>, but the step size should be adequate in a broader variety of cases. Note that users can use the <code>numderiv</code> argument for more control on numeric differentiation, as documented.</li>
<li><code>bife</code> models are no longer supported pending investigation in weird results in the tests. Looking for volunteers write more thorough tests.</li>
</ul>
<p>New:</p>
<ul>
<li>Support: <code>logistf</code> package.</li>
<li>Support: <code>DCchoice</code> package.</li>
<li>Support: <code>stats::nls</code></li>
<li><code>hypotheses()</code> can now accept raw data frame, which gives a lot of flexibility for custom contrasts and functions. See the Hypothesis vignette for an example.</li>
<li><code>numderiv</code> argument allows users to use finite difference (center or forward) or Richardson’s method to compute the numerical derivatives used in the calculation of standard errors.</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li><code>inferences()</code> supports the <code>cross</code> argument for <code>comparisons()</code> objects. Thanks to Kirill Solovev for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/856">#856</a>.</li>
<li><code>splines::bs()</code> in formulas could produce incorrect results due to weirdness in <code>stats::model.matrix()</code>. Thanks to <a href="https://github.com/chiungming"><span class="citation" data-cites="chiungming">@chiungming</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/831">#831</a>.</li>
<li><code>mgcv</code> with <code>ocat</code> are now supported. Thanks to Lorenzo Fabbri for Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/844">#844</a>.</li>
<li><code>quantreg</code> problem with <code>rowid</code> merge did not affect estimates but did not return the full original data. Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/829">#829</a>.</li>
<li><code>get_modeldata()</code> extracts weights variable when available.</li>
<li><code>predictions()</code> is no longer broken in some <code>inferences()</code> calls. Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/853">#853</a></li>
<li>Inaccurate averaging with <code>comparison=differenceavg</code> some models where all predictors are categorical. Thanks to Karl Ove Hufthammer for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/865">#865</a>.</li>
</ul>
<p>Misc:</p>
<ul>
<li>Major refactor to simplify the code base and make maintenance easier.</li>
</ul>
</section>
<section id="section-10" class="level2">
<h2 class="anchored" data-anchor-id="section-10">0.13.0</h2>
<p>Breaking change:</p>
<ul>
<li><code>glmmTMB</code>: Standard errors are no longer supported because they may have been erroneous. Follow Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/810">#810</a> on Github for developments: https://github.com/vincentarelbundock/marginaleffects/issues/810</li>
</ul>
<p>New:</p>
<ul>
<li><code>hypothesis</code> argument accepts wildcards: <code>hypothesis = "b*=b1"</code></li>
<li><code>s.value</code> column in all output: Shannon transforms for p values. See Greenland (2019).</li>
<li><code>marginal_means</code> supports <code>mira</code> (<code>mice</code> objects).</li>
<li><code>comparisons()</code>: The <code>variables</code> arguments now accepts arbitrary numeric vectors of length equal to the number of rows in <code>newdata</code>. This allows users to specify fully custom treatment sizes. In the documentation examples, we show how to estimate the difference for a 1 standard deviation shift in a regressor, where the standard deviation is calculated on a group-wise basis.</li>
<li><code>comparisons()</code>: the <code>variables</code> argument now accepts “revpairwise”, “revsequential”, “revreference” for factor and character variables.</li>
<li><code>comparisons()</code>: the <code>comparison</code> argument now accept “lift” and “liftavg”.</li>
</ul>
<p>Performance:</p>
<ul>
<li>Computing elasticities for linear models is now up to 30% faster (<a href="https://github.com/vincentarelbundock/marginaleffects/issues/787">#787</a>, <a href="https://github.com/etiennebacher"><span class="citation" data-cites="etiennebacher">@etiennebacher</span></a>).</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>Better handling of environments when <code>newdata</code> is a function call. Thanks to <a href="https://github.com/jcccf"><span class="citation" data-cites="jcccf">@jcccf</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/814">#814</a> and to <a href="https://github.com/capnrefsmmat"><span class="citation" data-cites="capnrefsmmat">@capnrefsmmat</span></a> for the proposed fix using the <code>rlang</code> package.</li>
<li>Degrees of freedom mismatch for joint hypothesis tests. Thanks to <a href="https://github.com/snhansen"><span class="citation" data-cites="snhansen">@snhansen</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/789">#789</a>.</li>
</ul>
</section>
<section id="section-11" class="level2">
<h2 class="anchored" data-anchor-id="section-11">0.12.0</h2>
<p>Breaking change:</p>
<ul>
<li>Row order of output has changed for many calls, especially those using the <code>by</code> argument. This may break hypothesis tests conducted by indexing <code>b1</code>, <code>b2</code>, etc. This was necessary to fix Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/776">#776</a>. Thanks to <a href="https://github.com/marcora"><span class="citation" data-cites="marcora">@marcora</span></a> for the report.</li>
</ul>
<p>New:</p>
<ul>
<li><code>hypotheses()</code>: Joint hypothesis tests (F and Chi-square) with the <code>joint</code> and <code>joint_test</code> arguments.</li>
<li><code>vcov.hypotheses</code> method.</li>
<li><code>wts</code> is now available in <code>plot_predictions()</code>, <code>plot_comparisons()</code>, and <code>plot_slopes()</code>.</li>
</ul>
<p>Bug:</p>
<ul>
<li>Wrong order of rows in bayesian models with <code>by</code> argument. Thanks to <a href="https://github.com/shirdekel"><span class="citation" data-cites="shirdekel">@shirdekel</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/782">#782</a>.</li>
</ul>
</section>
<section id="section-12" class="level2">
<h2 class="anchored" data-anchor-id="section-12">0.11.2</h2>
<ul>
<li><code>vcov()</code> and <code>coef()</code> methods for <code>marginaleffects</code> objects.</li>
<li>Strings in <code>wts</code> are accepted with the <code>by</code> argument.</li>
<li><code>predictions()</code> and <code>avg_predictions()</code> no longer use an automatic backtransformation for GLM models unless <code>hypothesis</code> is <code>NULL</code>.</li>
<li><code>vcov()</code> can be used to retrieve a full variance-covariance matrix from objects produced by <code>comparisons()</code>, <code>slopes()</code>, <code>predictions()</code>, or <code>marginal_means()</code> objects.</li>
<li>When processing objects obtained using <code>mice</code> multiple imputation, the pooled model using <code>mice::pool</code> is attached to the <code>model</code> attribute of the output. This means that functions like <code>modelsummary::modelsummary()</code> will not erroneously report goodness-of-fit statistics from just a single model and will instead appropriately report the statistics for the pooled model. Thanks to <a href="https://github.com/Tristan-Siegfried"><span class="citation" data-cites="Tristan-Siegfried">@Tristan-Siegfried</span></a> for PR <a href="https://github.com/vincentarelbundock/marginaleffects/issues/740">#740</a>.</li>
<li>More informative error messages on some prediction problems. Thanks to <a href="https://github.com/andymilne"><span class="citation" data-cites="andymilne">@andymilne</span></a> for Report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/751">#751</a>.</li>
</ul>
<p>Performance:</p>
<ul>
<li><code>inferences()</code> is now up to 17x faster and much more memory-efficient when <code>method</code> is <code>"boot"</code> or <code>"rsample"</code> (<a href="https://github.com/vincentarelbundock/marginaleffects/issues/770">#770</a>, <a href="https://github.com/vincentarelbundock/marginaleffects/issues/771">#771</a>, <a href="https://github.com/etiennebacher"><span class="citation" data-cites="etiennebacher">@etiennebacher</span></a>).</li>
</ul>
<p>Bugs:</p>
<ul>
<li><code>brms</code> models with <code>nl=TRUE</code> and a single predictor generated an error. Thanks to <a href="https://github.com/Tristan-Siegried"><span class="citation" data-cites="Tristan-Siegried">@Tristan-Siegried</span></a> for Report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/759">#759</a>.</li>
<li><code>avg_predictions()</code>: Incorrect group-wise averaging when all predictors are categorical, the <code>variables</code> variable is used, and we are averaging with <code>avg_</code> or the <code>by</code> argument. Thanks to BorgeJorge for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/766">#766</a>.</li>
<li>Bug when <code>datagrid()</code> when called inside a user-written function. Thanks to <a href="https://github.com/NickCH-K"><span class="citation" data-cites="NickCH-K">@NickCH-K</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/769">#769</a> and to <a href="https://github.com/capnrefsmmat"><span class="citation" data-cites="capnrefsmmat">@capnrefsmmat</span></a> for the diagnostics.</li>
</ul>
</section>
<section id="section-13" class="level2">
<h2 class="anchored" data-anchor-id="section-13">0.11.1</h2>
<p>Breaking change:</p>
<ul>
<li>Row orders are now more consistent, but may have changed from previous version. This could affect results from <code>hypothesis</code> with <code>b1</code>, <code>b2</code>, … indexing.</li>
</ul>
<p>Support new models:</p>
<ul>
<li><code>nlme::lme()</code></li>
<li><code>phylolm::phylolm()</code></li>
<li><code>phylolm::phyloglm()</code></li>
</ul>
<p>New:</p>
<ul>
<li>Vignette on 2x2 experimental designs. Thanks to Demetri Pananos.</li>
<li><code>comparisons()</code> accepts data frames with two numeric columns (“low” and “high”) to specify fully customizable contrasts.</li>
<li><code>datagrid()</code> gets a new <code>by</code> argument to create apply grid-making functions within groups.</li>
<li><code>plot_*()</code> gain a <code>newdata</code> argument for use with <code>by</code>.</li>
</ul>
<p>Bug:</p>
<ul>
<li><code>comparisons(comparison = "lnratioavg")</code> ignored <code>wts</code> argument. Thanks to Demetri Pananos for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/737">#737</a>.</li>
<li><code>ordinal::clm()</code>: incorrect standard errors when location and scale parameters are the same. Thanks to MrJerryTAO for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/718">#718</a>.</li>
<li>Incorrect label for “2sd” comparisons. Thanks to Andy Milne for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/720">#720</a>.</li>
<li>Invalid factor levels in <code>datagrid()</code> means <code>newdata</code> argument gets ignored. Thanks to Josh Errickson for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/721">#721</a>.</li>
<li>Error in models with only categorical predictors and the <code>by</code> argument. Thanks to Sam Brilleman for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/723">#723</a>.</li>
<li>Elasticities are now supported for <code>ordinal::clm()</code> models. Thanks to MrJerryTAO for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/729">#729</a>.</li>
<li><code>glmmTMB</code> models with zero-inflated components are supported. Thanks to <a href="https://github.com/Helsinki-Ronan"><span class="citation" data-cites="Helsinki-Ronan">@Helsinki-Ronan</span></a> and <a href="https://github.com/strengejacke"><span class="citation" data-cites="strengejacke">@strengejacke</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/734">#734</a>.</li>
</ul>
</section>
<section id="section-14" class="level2">
<h2 class="anchored" data-anchor-id="section-14">0.11.0</h2>
<p>Breaking changes:</p>
<ul>
<li><code>type</code> column is replaced by <code>type</code> attribute.</li>
<li><code>predictions()</code> only works with officially supported model types (same list as <code>comparisons()</code> and <code>slopes()</code>).</li>
</ul>
<p>Renamed arguments (backward compatibility is preserved):</p>
<ul>
<li><code>transform_pre</code> -&gt; <code>comparison</code></li>
<li><code>transform_post</code> -&gt; <code>transform</code></li>
</ul>
<p>New:</p>
<ul>
<li><code>p_adjust</code> argument: Adjust p-values for multiple comparisons.</li>
<li><code>equivalence</code> argument available everywhere.</li>
</ul>
<p>Performance:</p>
<ul>
<li>Much faster results in <code>avg_*()</code> functions for models with only categorical predictors and many rows of data, using deduplication and weights instead of unit-level estimates.</li>
<li>Faster predictions in <code>lm()</code> and <code>glm()</code> models using <code>RcppEigen</code>.</li>
<li>Bayesian models with many rows. Thanks to Etienne Bacher. <a href="https://github.com/vincentarelbundock/marginaleffects/issues/694">#694</a></li>
<li>Faster predictions, especially with standard errors and large datasets.</li>
</ul>
<p>Bugs:</p>
<ul>
<li>Multiple imputation with <code>mira</code> objects was not pooling all datasets. Thanks to <a href="https://github.com/Generalized"><span class="citation" data-cites="Generalized">@Generalized</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/711">#711</a>.</li>
<li>Support for more models with offsets. Thanks to <a href="https://github.com/mariofiorini"><span class="citation" data-cites="mariofiorini">@mariofiorini</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/705">#705</a>.</li>
<li>Error on <code>predictions()</code> with <code>by</code> and <code>wts</code>. Thanks to Noah Greifer for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/695">#695</a>.</li>
<li><code>afex</code>: some models generated errors. Thanks to Daniel Lüdecke for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/696">#696</a>.</li>
<li><code>group</code> column name is always forbidden. Thanks to Daniel Lüdecke for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/697">#697</a>.</li>
<li>Blank graphs in <code>plot_comparisons()</code> with a list in <code>variables</code>.</li>
<li><code>type="link"</code> produced an error with some categorical <code>brms</code> models. Thanks to <a href="https://github.com/shirdekel"><span class="citation" data-cites="shirdekel">@shirdekel</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/703">#703</a>.</li>
<li>Error on <code>predictions(variables = ...)</code> for <code>glmmTMB</code> models. Thanks to Daniel Lüdecke for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/707">#707</a>.</li>
<li><code>by</code> with user-specified function in <code>comparison</code> and factor predictor did not aggregate correctly. Thanks to <a href="https://github.com/joaotedde"><span class="citation" data-cites="joaotedde">@joaotedde</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/715">#715</a>.</li>
<li><code>ordinal::clm</code>: Support <code>cum.prob</code> and <code>linear.predictor</code> prediction types. Thanks to <a href="https://github.com/MrJerryTAO"><span class="citation" data-cites="MrJerryTAO">@MrJerryTAO</span></a> for report <a href="https://github.com/vincentarelbundock/marginaleffects/issues/717">#717</a>.</li>
</ul>
</section>
<section id="section-15" class="level2">
<h2 class="anchored" data-anchor-id="section-15">0.10.0</h2>
<p>Performance:</p>
<ul>
<li>2-4x faster execution for many calls. Thanks to Etienne Bacher.</li>
</ul>
<p>New models supported:</p>
<ul>
<li><code>MCMCglmm::MCMCglmm</code></li>
<li><code>Rchoice::hetprob</code></li>
<li><code>Rchoice::ivpml</code></li>
<li>Multiple imputation using <code>mice</code> and any package which can return a list of imputed data frames (e.g., <code>Amelia</code>, <code>missRanger</code>, etc.)</li>
</ul>
<p>Plot improvements:</p>
<ul>
<li>New <code>by</code> argument to display marginal estimates by subgroup.</li>
<li>New <code>rug</code> argument to display tick marks in the margins.</li>
<li>New <code>points</code> argument in <code>plot_predictions()</code> to display a scatter plot.</li>
<li>New <code>gray</code> argument to plot in grayscale using line types and shapes instead of color.</li>
<li>The <code>effect</code> argument is renamed to <code>variables</code> in <code>plot_slopes()</code> and <code>plot_comparisons()</code>. This improves consistency with the analogous <code>slopes()</code> and <code>comparisons()</code> functions.</li>
<li>The plotting vignette was re-written.</li>
</ul>
<p>Other:</p>
<ul>
<li>Support multiple imputation with <code>mice</code> <code>mira</code> objects. The multiple imputation vignette was rewritten.</li>
<li>The <code>variables_grid</code> argument in <code>marginal_means()</code> is renamed <code>newdata</code>. Backward compatibility is maintained.</li>
<li><code>avg_*()</code> returns an informative error when <code>vcov</code> is “satterthwaite” or “kenward-roger”</li>
<li>“satterthwaite” and “kenward-roger” are now supported when <code>newdata</code> is not <code>NULL</code></li>
<li>Informative error when <code>hypothesis</code> includes a <code>b#</code> larger than the available number of estimates.</li>
<li><code>avg_predictions(model, variables = "x")</code> computes average counterfactual predictions by subgroups of <code>x</code></li>
<li><code>datagrid()</code> and <code>plot_*()</code> functions are faster in datasets with many extraneous columns.</li>
<li>In <code>predictions(type = NULL)</code> with <code>glm()</code> and <code>Gam()</code> we first make predictions on the link scale and then backtransform them. Setting <code>type="response"</code> explicitly makes predictions directly on the response scale without backtransformation.</li>
<li>Standard errors now supported for more <code>glmmTMB</code> models.</li>
<li>Use the <code>numDeriv</code> package for numeric differentiation in the calculation of delta method standard error. A global option can now be passed to <code>numDeriv::jacobian</code>:
<ul>
<li><code>options(marginaleffects_numDeriv = list(method = "simple", method.args = list(eps = 1e-6)))</code></li>
<li><code>options(marginaleffects_numDeriv = list(method = "Richardson", method.args = list(eps = 1e-6)))</code></li>
<li><code>options(marginaleffects_numDeriv = NULL)</code></li>
</ul></li>
<li>Print:
<ul>
<li>Print fewer significant digits.</li>
<li><code>print.marginaleffects</code> now prints all columns supplied to <code>newdata</code></li>
<li>Less redundant labels when using <code>hypothesis</code></li>
</ul></li>
<li>Many improvements to documentation.</li>
</ul>
<p>Bugfixes:</p>
<ul>
<li>Standard errors could be inaccurate in models with non-linear components (and interactions) when some of the coefficients were very small. This was related to the step size used for numerical differentiation for the delta method. Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/684">#684</a>.</li>
<li><code>avg_predictions(by =)</code> did not work when the dataset included a column named <code>term</code>. Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/683">#683</a>.</li>
<li><code>brms</code> models with multivariate outcome collapsed categories in <code>comparisons()</code>. Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/639">#639</a>.</li>
<li><code>hypotheses()</code> now works on lists and in calls to <code>lapply()</code>, <code>purrr::map()</code>, etc. Issue <a href="https://github.com/vincentarelbundock/marginaleffects/issues/660">#660</a>.</li>
</ul>
</section>
<section id="section-16" class="level2">
<h2 class="anchored" data-anchor-id="section-16">0.9.0</h2>
<p>Breaking changes:</p>
<ul>
<li>All functions return an <code>estimate</code> column instead of the function-specific <code>predicted</code>, <code>comparisons</code>, <code>dydx</code>, etc. This change only affects unit-level estimates, and not average estimates, which already used the <code>estimate</code> column name.</li>
<li>The <code>transform_avg</code> argument in <code>tidy()</code> deprecated. Use <code>transform_post</code> instead.</li>
<li><code>plot_*(draw=FALSE)</code> now return the actual variable names supplied to the <code>condition</code> argument, rather than the opaque “condition1”, “condition2”, etc.</li>
</ul>
<p>New models supported:</p>
<ul>
<li><code>blme</code> package.</li>
</ul>
<p>New features:</p>
<ul>
<li>New functions: <code>avg_predictions()</code>, <code>avg_comparisons()</code>, <code>avg_slopes()</code></li>
<li>Equivalence, non-inferiority, and non-superiority tests with the <code>hypotheses()</code> function and <code>equivalence</code> argument.</li>
<li>New experimental <code>inferences()</code> function: simulation-based inferences and bootstrap using the <code>boot</code>, <code>rsample</code>, and <code>fwb</code> package.</li>
<li>New <code>df</code> argument to set degrees of freedom manually for p and CI.</li>
<li>Pretty <code>print()</code> for all objects.</li>
<li><code>by</code> argument
<ul>
<li><code>TRUE</code> returns average (marginal) predictions, comparisons, or slopes.</li>
<li>Supports bayesian models.</li>
</ul></li>
<li><code>hypothesis</code> argument
<ul>
<li>Numeric value sets the null used in calculating Z and p.</li>
<li>Example: <code>comparisons(mod, transform_pre = "ratio", hypothesis = 1)</code></li>
</ul></li>
<li>All arguments from the main functions are now available through <code>tidy()</code>, and <code>summary()</code>: <code>conf_level</code>, <code>transform_post</code>, etc.</li>
<li>Bayesian posterior distribution summaries (median, mean, HDI, quantiles) can be customized using global options. See <code>?comparisons</code></li>
</ul>
<p>Renamed functions (backward-compatibility is maintained by keeping the old function names as aliases):</p>
<ul>
<li><code>marginaleffects()</code> -&gt; <code>slopes()</code></li>
<li><code>posteriordraws()</code> -&gt; <code>posterior_draws()</code></li>
<li><code>marginalmeans()</code> -&gt; <code>marginal_means()</code></li>
<li><code>plot_cap()</code> -&gt; <code>plot_predictions()</code></li>
<li><code>plot_cme()</code> -&gt; <code>plot_slopes()</code></li>
<li><code>plot_cco()</code> -&gt; <code>plot_comparisons()</code></li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>Incorrect results: In 0.8.1, <code>plot_*()</code> the <code>threenum</code> and <code>minmax</code> labels did not correspond to the correct numeric values.</li>
<li>Fix corner case for slopes when the dataset includes infinite values.</li>
<li><code>mlogit</code> error with factors.</li>
<li>The <code>vcov</code> argument now accepts functions for most models.</li>
</ul>
<p>Other:</p>
<ul>
<li>Removed major performance bottleneck for <code>slopes()</code></li>
</ul>
</section>
<section id="section-17" class="level2">
<h2 class="anchored" data-anchor-id="section-17">0.8.1</h2>
<ul>
<li><code>deltamethod()</code> can run hypothesis tests on objects produced by the <code>comparisons()</code>, <code>marginaleffects()</code>, <code>predictions()</code>, and <code>marginalmeans()</code> functions. This feature relies on <code>match.call()</code>, which means it may not always work when used programmatically, inside functions and nested environments. It is generally safer and more efficient to use the <code>hypothesis</code> argument.</li>
<li><code>plot_cme()</code> and <code>plot_cco()</code> accept lists with user-specified values for the regressors, and can display nice labels for shortcut string-functions like “threenum” or “quartile”.</li>
<li><code>posterior_draws</code>: new <code>shape</code> argument to return MCMC draws in various formats, including the new <code>rvar</code> structure from the <code>posterior</code> package.</li>
<li><code>transform_avg</code> function gets printed in <code>summary()</code> output.</li>
<li><code>transform_post</code> and <code>transform_avg</code> support string shortcuts: “exp” and “ln”</li>
<li>Added support for <code>mlm</code> models from <code>lm()</code>. Thanks to Noah Greifer.</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li><code>hypothesis</code> argument with bayesian models and <code>tidy()</code> used to raise an error.</li>
<li>Missing values for some regressors in the <code>comparisons()</code> output for <code>brms</code> models.</li>
</ul>
</section>
<section id="section-18" class="level2">
<h2 class="anchored" data-anchor-id="section-18">0.8.0</h2>
<p>Breaking change:</p>
<ul>
<li>The <code>interaction</code> argument is deprecated and replaced by the <code>cross</code> argument. This is to reduce ambiguity with respect to the <code>interaction</code> argument in <code>emmeans</code>, which does something completely different, akin to the difference-in-differences illustrated in the Interactions vignette.</li>
</ul>
<p>71 classes of models supported, including the new:</p>
<ul>
<li><code>rms::ols</code></li>
<li><code>rms::lrm</code></li>
<li><code>rms::orm</code></li>
</ul>
<p>New features:</p>
<ul>
<li>Plots: <code>plot_cme()</code>, <code>plot_cap()</code>, and <code>plot_cco()</code> are now much more flexible in specifying the comparisons to display. The <code>condition</code> argument accepts lists, functions, and shortcuts for common reference values, such as “minmax”, “threenum”, etc.</li>
<li><code>variables</code> argument of the <code>comparisons()</code> function is more flexible:
<ul>
<li>Accepts functions to specify custom differences in numeric variables (e.g., forward and backward differencing).</li>
<li>Can specify pairs of factors to compare in the <code>variables</code> argument of the <code>comparisons</code> function.</li>
</ul></li>
<li><code>variables</code> argument of the <code>predictions()</code> function is more flexible:
<ul>
<li>Accepts shortcut strings, functions, and vectors of arbitrary length.</li>
</ul></li>
<li>Integrate out random effects in bayesian <code>brms</code> models (see Bayesian analysis vignette)</li>
</ul>
<p>New vignettes:</p>
<ul>
<li>Experiments</li>
<li>Extending marginal effects</li>
<li>Integrating out random effects in bayesian models</li>
</ul>
<p>Bug fixes and minor improvements:</p>
<ul>
<li>The default value of <code>conf_level</code> in <code>summary()</code> and <code>tidy()</code> is now <code>NULL</code>, which inherits the <code>conf_level</code> value in the original <code>comparisons</code>/<code>marginaleffects</code>/<code>predictions</code> calls.</li>
<li>Fix typo in function names for missing “lnratioavgwts”</li>
<li>Interactions with <code>fixest::i()</code> are parsed properly as categorical variables</li>
<li>For <code>betareg</code> objects, inference can now be done on all coefficients using <code>deltamethod()</code>. previously only the location coefficients were available.</li>
<li>For objects from <code>crch</code> package, a number of bugs have been fixed; standard errors should now be correct for <code>deltamethod()</code>, <code>marginaleffects()</code>, etc.</li>
<li>Fixed a bug in the <code>tidy()</code> function for <code>glmmTMB</code> models without random effects, which caused all t statistics to be identical.</li>
</ul>
</section>
<section id="section-19" class="level2">
<h2 class="anchored" data-anchor-id="section-19">0.7.1</h2>
<ul>
<li>New supported model class: <code>gamlss</code>. Thanks to Marcio Augusto Diniz.</li>
<li><code>marginalmeans()</code> accepts a <code>wts</code> argument with values: “equal”, “proportional”, “cells”.</li>
<li><code>by</code> argument
<ul>
<li>accepts data frames for complex groupings.</li>
<li>in <code>marginalmeans</code> only accepts data frames.</li>
<li>accepts “group” to group by response level.</li>
<li>works with bayesian models.</li>
</ul></li>
<li><code>byfun</code> argument for the <code>predictions()</code> function to aggregate using different functions.</li>
<li><code>hypothesis</code> argument
<ul>
<li>The matrix column names are used as labels for hypothesis tests.</li>
<li>Better labels with “sequential”, “reference”, “pairwise”.</li>
<li>new shortcuts “revpairwise”, “revsequential”, “revreference”</li>
</ul></li>
<li><code>wts</code> argument is respected in <code>by</code> argument and with <code>*avg</code> shortcuts in the <code>transform_pre</code> argument.</li>
<li><code>tidy.predictions()</code> and <code>tidy.marginalmeans()</code> get a new <code>transform_avg</code> argument.</li>
<li>New vignettes:
<ul>
<li>Unit-level contrasts in logistic regressions. Thanks to <a href="https://github.com/arthur-albuquerque"><span class="citation" data-cites="arthur-albuquerque">@arthur-albuquerque</span></a>.</li>
<li>Python Numpy models in <code>marginaleffects</code>. Thanks to timpipeseek.</li>
<li>Bootstrap example in standard errors vignette.</li>
</ul></li>
</ul>
</section>
<section id="section-20" class="level2">
<h2 class="anchored" data-anchor-id="section-20">0.7.0</h2>
<p>Breaking changes:</p>
<ul>
<li><code>by</code> is deprecated in <code>summary()</code> and <code>tidy()</code>. Use the same <code>by</code> argument in the main functions instead: <code>comparisons()</code>, <code>marginaleffects()</code>, <code>predictions()</code></li>
<li>Character vectors are no longer supported in the <code>variables</code> argument of the <code>predictions()</code> function. Use <code>newdata="fivenum"</code> or “grid”, “mean”, or “median” instead.</li>
</ul>
<p>Critical bug fix:</p>
<ul>
<li>Contrasts with interactions were incorrect in version 0.6.0. The error should have been obvious to most analysts in most cases (weird-looking alignment). Thanks to <a href="https://github.com/vmikk"><span class="citation" data-cites="vmikk">@vmikk</span></a>.</li>
</ul>
<p>New supported packages and models:</p>
<ul>
<li><code>survival::clogit</code></li>
<li><code>biglm</code>: The main quantities can be computed, but not the delta method standard errors. See https://github.com/vincentarelbundock/marginaleffects/issues/387</li>
</ul>
<p>New vignette:</p>
<ul>
<li>Elasticity</li>
<li>Frequently Asked Questions</li>
</ul>
<p>New features:</p>
<ul>
<li>Elasticity and semi-elasticity using the new <code>slope</code> argument in <code>marginaleffects()</code>: eyex, dyex, eydx</li>
<li><code>datagrid()</code> accepts functions: <code>datagrid(newdata = mtcars, hp = range, mpg = fivenum, wt = sd)</code></li>
<li>New <code>datagridcf()</code> function to create counterfactual datasets. This is a shortcut to the <code>datagrid()</code> function with default to <code>grid_type = "counterfactual"</code></li>
<li>New <code>by</code> arguments in <code>predictions()</code>, <code>comparisons()</code>, <code>marginaleffects()</code></li>
<li>New <code>newdata</code> shortcuts: “tukey”, “grid”</li>
<li>New string shortcuts for <code>transform_pre</code> in <code>comparisons()</code></li>
<li><code>marginalmeans()</code> now back transforms confidence intervals when possible.</li>
<li><code>vcov</code> argument string shortcuts are now case-insensitive</li>
<li>The default contrast in <code>comparisons()</code> for binary predictors is now a difference between 1 and 0, rather than +1 relative to baseline.</li>
<li>documentation improvements</li>
</ul>
</section>
<section id="section-21" class="level2">
<h2 class="anchored" data-anchor-id="section-21">0.6.0</h2>
<p>New supported packages and models:</p>
<ul>
<li><code>tidymodels</code> objects of class <code>tidy_model</code> are supported if the fit engine is supported by <code>marginaleffects</code>.</li>
</ul>
<p>New function:</p>
<ul>
<li><code>deltamethod()</code>: Hypothesis tests on functions of parameters</li>
<li><code>plot_cco()</code>: Plot conditional contrasts</li>
</ul>
<p>New arguments:</p>
<ul>
<li><code>hypothesis</code> for hypothesis tests and custom contrasts</li>
<li><code>transform_post</code> in <code>predictions()</code></li>
<li><code>wts</code> argument in <code>predictions()</code> only affects average predictions in <code>tidy()</code> or <code>summary()</code>.</li>
</ul>
<p>New or improved vignettes:</p>
<ul>
<li>Hypothesis Tests and Custom Contrasts using the Delta Method: https://marginaleffects.com/vignettes/hypothesis.html</li>
<li>Multiple Imputation: https://marginaleffects.com/vignettes/multiple_imputation.html</li>
<li>Causal Inference with the g-Formula: https://marginaleffects.com/vignettes/gcomputation.html (Thanks to Rohan Kapre for the idea)</li>
</ul>
<p>Deprecated or renamed arguments:</p>
<ul>
<li><code>contrast_factor</code> and <code>contrast_numeric</code> arguments are deprecated in <code>comparisons()</code>. Use a named list in the <code>variables</code> argument instead. Backward compatibility is maintained.</li>
<li>The <code>transform_post</code> argument in <code>tidy()</code> and <code>summary()</code> is renamed to <code>transform_avg</code> to disambiguate against the argument of the same name in <code>comparisons()</code>. Backward compatibility is preserved.</li>
</ul>
<p>Misc:</p>
<ul>
<li><code>tidy.predictions()</code> computes standard errors using the delta method for average predictions</li>
<li>Support <code>gam</code> models with matrix columns.</li>
<li><code>eps</code> in <code>marginaleffects()</code> is now “adaptive” by default: it equals 0.0001 multiplied the range of the predictor variable</li>
<li><code>comparisons()</code> now supports “log of marginal odds ratio” in the <code>transform_pre</code> argument. Thanks to Noah Greifer.</li>
<li>New <code>transform_pre</code> shortcuts: dydx, expdydx</li>
<li><code>tidy.predictions()</code> computes standard errors and confidence intervals for linear models or GLM on the link scale.</li>
</ul>
</section>
<section id="section-22" class="level2">
<h2 class="anchored" data-anchor-id="section-22">0.5.0</h2>
<p>Breaking changes:</p>
<ul>
<li><code>type</code> no longer accepts a character vector. Must be a single string.</li>
<li><code>conf.int</code> argument deprecated. Use <code>vcov = FALSE</code> instead.</li>
</ul>
<p>New supported packages and models:</p>
<ul>
<li><code>mlogit</code></li>
<li><code>mhurdle</code></li>
<li><code>tobit1</code></li>
<li><code>glmmTMB</code></li>
</ul>
<p>New features:</p>
<ul>
<li><code>interaction</code> argument in <code>comparisons()</code> to compute interactions between contrasts (cross-contrasts).</li>
<li><code>by</code> argument in <code>tidy()</code> and <code>summary()</code> computes group-average marginal effects and comparisons.</li>
<li><code>transform_pre</code> argument can define custom contrasts between adjusted predictions (e.g., log adjusted risk ratios). Available in <code>comparisons()</code>.</li>
<li><code>transform_post</code> argument allows back transformation before returning the final results. Available in <code>comparisons()</code>, <code>marginalmeans()</code>, <code>summary()</code>, <code>tidy()</code>.</li>
<li>The <code>variables</code> argument of the <code>comparisons()</code> function accepts a named list to specify variable-specific contrast types.</li>
<li>Robust standard errors with the <code>vcov</code> argument. This requires version 0.17.1 of the <code>insight</code> package.
<ul>
<li><code>sandwich</code> package shortcuts: <code>vcov = "HC3"</code>, <code>"HC2"</code>, <code>"NeweyWest"</code>, and more.</li>
<li>Mixed effects models: <code>vcov = "satterthwaite"</code> or <code>"kenward-roger"</code></li>
<li>One-sided formula to clusters: <code>vcov = ~cluster_variable</code></li>
<li>Variance-covariance matrix</li>
<li>Function which returns a named squared matrix</li>
</ul></li>
<li><code>marginalmeans()</code> allows interactions</li>
<li>Bayesian Model Averaging for <code>brms</code> models using <code>type = "average"</code>. See vignette on the <code>marginaleffects</code> website.</li>
<li><code>eps</code> argument for step size of numerical derivative</li>
<li><code>marginaleffects</code> and <code>comparisons</code> now report confidence intervals by default.</li>
<li>New dependency on the <code>data.table</code> package yields substantial performance improvements.</li>
<li>More informative error messages and warnings</li>
<li>Bug fixes and performance improvements</li>
</ul>
<p>New pages on the <code>marginaleffects</code> website: https://marginaleffects.com/</p>
<ul>
<li>Alternative software packages</li>
<li>Robust standard errors (and more)</li>
<li>Performance tips</li>
<li>Tables and plots</li>
<li>Multinomial Logit and Discrete Choice Models</li>
<li>Generalized Additive Models</li>
<li>Mixed effects models (Bayesian and Frequentist)</li>
<li>Transformations and Custom Contrasts: Adjusted Risk Ratio Example</li>
</ul>
<p>Argument name changes (backward compatibility is preserved:</p>
<ul>
<li>Everywhere:
<ul>
<li><code>conf.level</code> -&gt; <code>conf_level</code></li>
</ul></li>
<li><code>datagrid()</code>:
<ul>
<li><code>FUN.factor</code> -&gt; <code>FUN_factor</code> (same for related arguments)</li>
<li><code>grid.type</code> -&gt; <code>grid_type</code></li>
</ul></li>
</ul>
</section>
<section id="section-23" class="level2">
<h2 class="anchored" data-anchor-id="section-23">0.4.1</h2>
<p>New supported packages and models:</p>
<ul>
<li><code>stats::loess</code></li>
<li><code>sampleSelection::selection</code></li>
<li><code>sampleSelection::heckit</code></li>
</ul>
<p>Misc:</p>
<ul>
<li><code>mgcv::bam</code> models allow <code>exclude</code> argument.</li>
<li>Gam models allow <code>include_smooth</code> argument.</li>
<li>New tests</li>
<li>Bug fixes</li>
</ul>
</section>
<section id="section-24" class="level2">
<h2 class="anchored" data-anchor-id="section-24">0.4.0</h2>
<p>New function:</p>
<ul>
<li><code>comparisons()</code> computes contrasts</li>
</ul>
<p>Misc:</p>
<ul>
<li>Speed optimizations</li>
<li><code>predictions()</code> and <code>plot_cap()</code> include confidence intervals for linear models</li>
<li>More robust handling of in-formula functions: factor(), strata(), mo()</li>
<li>Do not overwrite user’s <code>ggplot2::theme_set()</code> call</li>
</ul>
</section>
<section id="section-25" class="level2">
<h2 class="anchored" data-anchor-id="section-25">0.3.4</h2>
<ul>
<li>Bug fixes</li>
</ul>
</section>
<section id="section-26" class="level2">
<h2 class="anchored" data-anchor-id="section-26">0.3.3</h2>
<p>New supported models:</p>
<ul>
<li><code>mclogit::mclogit</code></li>
<li><code>robust::lmRob</code></li>
<li><code>robustlmm::rlmer</code></li>
<li><code>fixest</code> confidence intervals in <code>predictions</code></li>
</ul>
<p>Misc:</p>
<ul>
<li>Support <code>modelbased::visualisation_matrix</code> in <code>newdata</code> without having to specify <code>x</code> explicitly.</li>
<li><code>tidy.predictions()</code> and <code>summary.predictions()</code> methods.</li>
<li>Documentation improvements.</li>
<li>CRAN test fixes</li>
</ul>
</section>
<section id="section-27" class="level2">
<h2 class="anchored" data-anchor-id="section-27">0.3.2</h2>
<p>Support for new models and packages:</p>
<ul>
<li><code>brglm2::bracl</code></li>
<li><code>mclogit::mblogit</code></li>
<li><code>scam::scam</code></li>
<li><code>lmerTest::lmer</code></li>
</ul>
<p>Misc:</p>
<ul>
<li>Drop <code>numDeriv</code> dependency, but make it available via a global option: options(“marginaleffects_numDeriv” = list(method = “Richardson”, method.args = list(eps = 1e-5, d = 0.0001)))</li>
<li>Bugfixes</li>
<li>Documentation improvements</li>
<li>CRAN tests</li>
</ul>
</section>
<section id="section-28" class="level2">
<h2 class="anchored" data-anchor-id="section-28">0.3.1</h2>
<p>documentation bugfix</p>
</section>
<section id="section-29" class="level2">
<h2 class="anchored" data-anchor-id="section-29">0.3.0</h2>
<p>Breaking changes:</p>
<ul>
<li><code>predictions</code> returns predictions for every observation in the original dataset instead of <code>newdata=datagrid()</code>.</li>
<li><code>marginalmeans</code> objects have new column names, as do the corresponding <code>tidy</code> and <code>summary</code> outputs.</li>
</ul>
<p>New supported packages and models:</p>
<ul>
<li><code>brms::brm</code></li>
<li><code>rstanarm::stanglm</code></li>
<li><code>brglm2::brmultinom</code></li>
<li><code>MASS::glmmPQL</code></li>
<li><code>aod::betabin</code></li>
</ul>
<p>Misc:</p>
<ul>
<li><code>datagrid</code> function supersedes <code>typical</code> and <code>counterfactual</code> with the <code>grid.type</code> argument. The <code>typical</code> and <code>counterfactual</code> functions will remain available and exported, but their use is not encouraged.</li>
<li><code>posterior_draws</code> function can be applied to a <code>predictions</code> or a <code>marginaleffects</code> object to extract draws from the posterior distribution.</li>
<li><code>marginalmeans</code> standard errors are now computed using the delta method.</li>
<li><code>predictions</code> standard errors are now computed using the delta method when they are not available from <code>insight::get_predicted</code>.</li>
<li>New vignette on Bayesian models with <code>brms</code></li>
<li>New vignette on Mixed effects models with <code>lme4</code></li>
<li>If the <code>data.table</code> package is installed, <code>marginaleffects</code> will automatically use it to speed things up.</li>
<li>Contrast definition reported in a separate column of <code>marginaleffects</code> output.</li>
<li>Safer handling of the <code>type</code> argument.</li>
<li>Comprehensive list of supported and tests models on the website.</li>
<li>Many bug fixes</li>
<li>Many new tests, including several against <code>emmeans</code></li>
</ul>
</section>
<section id="section-30" class="level2">
<h2 class="anchored" data-anchor-id="section-30">0.2.0</h2>
<p>Breaking change:</p>
<ul>
<li><code>data</code> argument becomes <code>newdata</code> in all functions.</li>
</ul>
<p>New supported packages and models:</p>
<ul>
<li><code>lme4:glmer.nb</code></li>
<li><code>mgcv::gam</code></li>
<li><code>ordinal::clm</code></li>
<li><code>mgcv</code></li>
</ul>
<p><code>marginalmeans</code>:</p>
<ul>
<li>New <code>variables_grid</code> argument</li>
</ul>
<p><code>predictions</code>:</p>
<ul>
<li>Support <code>mgcv</code></li>
</ul>
<p><code>plot_cap</code></p>
<ul>
<li>New <code>type</code> argument</li>
</ul>
<p>Misc:</p>
<ul>
<li>New validity checks and tests</li>
</ul>
</section>
<section id="section-31" class="level2">
<h2 class="anchored" data-anchor-id="section-31">0.1.0</h2>
<p>First release. Bravo!</p>
<p>Thanks to Marco Avina Mendoza, Resul Umit, and all those who offered comments and suggestions.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./man/print.marginaleffects.html" class="pagination-link" aria-label="`print.marginaleffects`">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><code>print.marginaleffects</code></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./LICENSE.html" class="pagination-link" aria-label="License">
        <span class="nav-page-text">License</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>