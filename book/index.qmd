
<img src="https://user-images.githubusercontent.com/987057/134899484-e3392510-2e94-4c39-9830-53356fa5feed.png" align="right" alt="" width="200" />

<!--
[![Codecov test coverage](https://codecov.io/gh/vincentarelbundock/marginaleffects/branch/main/graph/badge.svg)](https://app.codecov.io/gh/vincentarelbundock/marginaleffects?branch=main)
[![R-CMD-check](https://github/To cl.com/vincentarelbundock/marginaleffects/workflows/R-CMD-check/badge.svg)](https://github.com/vincentarelbundock/marginaleffects/actions)
[![CRAN status](https://www.r-pkg.org/badges/version/marginaleffects)](https://CRAN.R-project.org/package=marginaleffects)
[![status](https://tinyverse.netlify.com/badge/marginaleffects)](https://CRAN.R-project.org/package=marginaleffects)
-->

```{r, include = FALSE}
options(width = 10000)
okabeito <- c('#E69F00', '#56B4E9', '#009E73', '#F0E442', '#0072B2', '#D55E00', '#CC79A7', '#999999', '#000000')
options(ggplot2.discrete.colour = okabeito)
options(ggplot2.discrete.fill = okabeito)
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
#| echo = FALSE
url <- "https://raw.githubusercontent.com/vincentarelbundock/marginaleffects/main/data-raw/supported_models.csv"
dat <- read.csv(url)
n_support <- nrow(dat)
```

The `marginaleffects` package for `R` allows users to compute and plot predictions, slopes, marginal means, and comparisons (contrasts, risk ratios, odds, etc.) for over [`r n_support` classes](articles/supported_models.html) of statistical models. It can conduct linear and non-linear hypothesis tests, or equivalence tests, and calculate uncertainty estimates using the delta method, bootstrapping, or simulation-based inference.

Website: 

* Current release: https://vincentarelbundock.github.io/marginaleffects
* Development version: https://vincentarelbundock.github.io/marginaleffects/dev

# Why?

Parameter estimates are often hard to interpret substantively, especially when they are generated by complex models with non-linear components or transformations. Many applied researchers would rather focus on simple quantities of interest, which have straightforward scientific interpretations. Unfortunately, these estimands (and their standard errors) are tedious to compute. Moreover, the different modeling packages in `R` often produce inconsistent objects that require special treatment.

`marginaleffects` offers a single point of entry to easily interpret the results of over `r n_support` classes of models, using a simple and consistent user interface.

Benefits of `marginaleffects` include:

* _Powerful:_ It can compute predictions, comparisons (contrasts, risk ratios, etc.), slopes, and conduct hypothesis tests for `r n_support` different classes of models in `R`.
* _Simple:_ All functions share a simple and unified interface.
* _Documented_: Each function is thoroughly documented with abundant examples. The website includes 20,000+ words of vignettes and case studies.
* _Efficient:_ [Some operations](articles/performance.html) are orders of magnitude faster than with the `margins` package, and the memory footprint is much smaller.
* _Thin:_ Few dependencies.
* _Standards-compliant:_ `marginaleffects` follows "tidy" principles and returns objects that work with standard functions like `summary()`, `head()`, `tidy()`, and `glance()`. These objects are easy to program with and feed to [other packages like `modelsummary`.](https://vincentarelbundock.github.io/modelsummary/) 
* _Valid:_  When possible, [numerical results are checked](articles/supported_models.html) against alternative software like `Stata` or other `R` packages. Unfortunately, it is not possible to test every model type, so users are still strongly encouraged to cross-check their results.
* _Extensible:_ Adding support for new models is very easy, often requiring less than 10 lines of new code. Please submit [feature requests on Github.](https://github.com/vincentarelbundock/marginaleffects/issues)
* _Active development_: Bugs are fixed promptly.

# What?

The `marginaleffects` package allows `R` users to compute and plot three principal quantities of interest: (1) predictions, (2) comparisons, and (3) slopes. In addition, the package includes a convenience function to compute a fourth estimand, "marginal means", which is a special case of averaged predictions. `marginaleffects` can also average (or "marginalize") unit-level (or "conditional") estimates of all those quantities, and conduct hypothesis tests on them.

[Predictions:](articles/predictions.html)

> The outcome predicted by a fitted model on a specified scale for a given combination of values of the predictor variables, such as their observed values, their means, or factor levels. a.k.a. Fitted values, adjusted predictions. `predictions()`, `avg_predictions()`, `plot_predictions()`.

[Comparisons:](articles/comparisons.html)

> Compare the predictions made by a model for different regressor values (e.g., college graduates vs. others): contrasts, differences, risk ratios, odds, lift, etc. `comparisons()`, `avg_comparisons()`, `plot_comparisons()`.

[Slopes:](articles/slopes.html) 

> Partial derivative of the regression equation with respect to a regressor of interest. a.k.a. Marginal effects, trends. `slopes()`, `avg_slopes()`, `plot_slopes()`.

[Marginal Means:](articles/marginalmeans.html) 

> Predictions of a model, averaged across a "reference grid" of categorical predictors. `marginalmeans()`.

[Hypothesis and Equivalence Tests:](articles/hypothesis.html)

> Hypothesis and equivalence tests can be conducted on linear or non-linear functions of model coefficients, or on any of the quantities computed by the `marginaleffects` packages (predictions, slopes, comparisons, marginal means, etc.). Uncertainy estimates can be obtained via the delta method (with or without robust standard errors), bootstrap, or simulation.

```{r, echo = FALSE}
library(tibble)
tab <- tribble(
  ~Goal, ~Function,
  "Predictions", "[`predictions()`](reference/predictions.html)",
  ""           , "[`avg_predictions()`](reference/predictions.html)",
  ""           , "[`plot_predictions()`](reference/plot_predictions.html)",
  "Comparisons", "[`comparisons()`](reference/comparisons.html)",
  ""           , "[`avg_comparisons()`](reference/comparisons.html)",
  ""           , "[`plot_comparisons()`](reference/plot_comparisons.html)",
  "Slopes"     , "[`slopes()`](reference/slopes.html)",
  ""           , "[`avg_slopes()`](reference/slopes.html)",
  ""           , "[`plot_slopes()`](reference/plot_slopes.html)",
  "Marginal Means", "[`marginal_means()`](reference/marginal_means.html)",
  "Grids"      , "[`datagrid()`](reference/datagrid.html)",
  ""           , "[`datagridcf()`](reference/datagrid.html)",
  "Hypothesis & Equivalence", "[`hypotheses()`](reference/hypotheses.html)",
  "Bayes, Bootstrap, Simulation", "[`posterior_draws()`](reference/inferences.html)",
  "", "[`inferences()`](reference/inferences.html)"
)
knitr::kable(tab)
```

# License and Citation

The `marginaleffects` package is licensed under the [GNU General Public License v3.0.](https://www.gnu.org/licenses/gpl-3.0.en.html) The content of this website/book is licensed under the [Creative Commons Attribution-NonCommercial 4.0 International (CC BY-NC 4.0).](https://creativecommons.org/licenses/by-nc/4.0/)


```{r}
#| echo: false
#| comment: ""
citation("marginaleffects") |> print()
```
